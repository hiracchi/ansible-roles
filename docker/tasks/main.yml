---
#- name: install Docker on various os
#  include_vars: "{{ item }}"
#  with_first_found:
#    - "docker-{{ ansible_lsb.id }}.yml"
#    - "docker-{{ ansible_distribution }}-{{ ansible_distribution_major_version }}.yml"
#    - "docker-{{ ansible_distribution }}.yml"

- include: docker-Ubuntu.yml
  when:
    - ansible_distribution == "Ubuntu"

- include: docker-Raspbian.yml
  when:
    - ansible_lsb.id == "Raspbian"

- include: docker-storage.yml

- name: add docker group
  become: yes
  user:
    name: "{{ item }}"
    append: yes
    groups: docker
    state: present
  with_items: "{{ docker_users | default([]) }}"

